<!DOCTYPE html>
<html>
<head>
    <title>Create a "This Person" Facebook/Google+ message</title>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="title" content="Create an enchanced social network message" />
    <meta name="description" content="A free tool to create the next internet meme" />
    <link rel="image_src" type="image/jpeg" href="img/image_src.jpg" />
    <link rel="stylesheet" href="scatterbright.css" type="text/css" />
    <style>
        #thecanvas {
            display: none;
            width: 400px;
            height: 400px;
        }

        #txtFontPx {
            width: 25px;
        }

        #divExample {
            padding-left: 25px;
        }

        #divBroken {
            margin: 15px auto;
            width: 800px;
            display: none;
        }

        #imgExample {
            border: 1px solid #999999;
        }

        .super {
            font-size: 12px;
            vertical-align: super;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            width: 100%;
            overflow: auto;
        }

        .flow {
            max-width: 450px;
            padding-right: 20px;
        }
    </style>

</head>
<body>
    <div id="divHeader">
        <div class="content">
            <a href="index.html">Scatterbright</a>
        </div>
    </div>
    <div id="divContent" class="content">
        <canvas id="thecanvas" width="400" height="400">
            Your browser does not support the canvas element. Sorry.
        </canvas>
        <h1>Create a "This Person" social media message in three easy steps!</h1>
        <p>
            Do you have an important cause, meme, or insight to share with your social network? Which of these messages
            is more effective?
        </p>
        <div id="divExample">
            <img id="imgExample" src="img/example.jpg" alt="Two Facebook messages" />
        </div>
        <p>
            If your message could benefit from a punchy font, classy colors, or a big arrow pointing at your head, make
            a "This Person" message today!
        </p>
        <div class="container">
            <div class="flow">

                <h2>Step #1</h2>
                <p>
                    Craft a pithy message, choose a high-impact font, and create a persuasive palette.
                </p>
                <div>
                    <textarea id="txt" cols="35" rows="10">
    loves coleslaw

        ...but hates
        cabbage!
            </textarea>
                </div>
                <div>
                    <span>Font</span>
                    <input type="text" id="txtFontPx" value="42" />
                    <label for="txtFontPx">px</label>
                    <select id="ddlFont">
                        <option>Arial</option>
                        <option>Calibri</option>
                        <option>Courier</option>
                        <option>Garamond</option>
                        <option>Georgia</option>
                        <option>Helvetica</option>
                        <option>Lucinda Grande</option>
                        <option>Tahoma</option>
                        <option>Times New Roman</option>
                        <option>Verdana</option>
                    </select>
                </div>
                <div>
                    <label for="chkBold">Bold</label>
                    <input type="checkbox" id="chkBold" />
                    <label for="chkDropShadow">Drop Shadow</label>
                    <input type="checkbox" id="chkDropShadow" checked="checked" />
                </div>
                <div>
                    <span>Font Color</span>
                    <input type="text" class="color" id="txtFontColor" value="000000" />
                </div>
                <div>
                    <span>Border Color</span>
                    <input type="text" class="color" id="txtBorder" value="AAB368" />
                </div>
                <div>
                    <span>Background Color</span>
                    <input type="text" class="color" id="txtBg" value="FFFFFF" />
                </div>
                <div>
                    <span>Arrow Color</span>
                    <input type="text" class="color" id="txtArrow" value="0000FF" />
                </div>
            </div>
            <div class="flow">
                <h2>Step #2</h2>
                <p>
                    Right Click / Ctrl+Click on the image below and save it.
                    <span class="super">
                        <a href="#pSafari">1</a>
                    </span>
                </p>
                <img id="img" alt="Enchanced Message" />
            </div>
        </div>
        <div id="divStep3">
            <h2>Step #3</h2>
            <p>
                Share your image and the powerful message it contains on your favorite social network.
            </p>
        </div>
        <div id="divFooter">
            <p id="pSafari">
                1. Safari users may have to add the .png extension to their image while saving.
            </p>
            <p>
                A special thanks to Jan Odv√°rko who created
                <a href="http://jscolor.com/">JSColor</a>.
            </p>
        </div>
    </div>
    <div id="divBroken">
        <h1>Sorry, this page doesn't work in your browser.</h1>
        <p>
            This page uses one or more technologies that are not supported by your browser. If this bothers you, you
            might want to try the latest version of Firefox, Chrome, Safari, or Opera.
        </p>
        <p>
            If you are running the latest version of Firefox, Chrome, Safari, or Opera and this page still doesn't work,
            please accept my apologies. I must have missed something.
        </p>
    </div>

    <script type="text/javascript" src="jscolor/jscolor.js"></script>
    <script type="text/javascript">
        function byId(id) {
            return document.getElementById(id);
        }

        var canvas = byId('thecanvas');

        function drawArrow(ctx) {
            ctx.fillStyle = '#' + byId('txtArrow').value;
            ctx.beginPath();
            ctx.moveTo(15, 15);
            ctx.lineTo(30, 70);
            ctx.lineTo(40, 60);
            ctx.lineTo(90, 110);
            ctx.lineTo(110, 90);
            ctx.lineTo(60, 40);
            ctx.lineTo(70, 30);
            ctx.fill();
        }

        function drawText(ctx) {
            var txt = byId('txt').value;
            ctx.fillStyle = '#' + byId('txtFontColor').value;
            var fontPx = 32;
            var fontPxInt = parseInt(byId('txtFontPx').value);
            if (!isNaN(fontPxInt)) {
                fontPx = fontPxInt;
            }
            var font = byId('ddlFont').value;
            if (font.indexOf(' ') >= 0)
                font = '"' + font + '"';

            ctx.font = (byId('chkBold').checked ? '700' : '400') + ' ' + fontPx.toString() + 'px ' + font;
            ctx.fillText('This Person', 115, 115);
            var lines = txt.replace('\r\n', '\n').replace('\r', '\n').split('\n');
            fontPx += 4;
            for (var i = 0; i < lines.length; i++) {
                ctx.fillText(lines[i], 20, 115 + fontPx * (i + 1));
            }
        }

        function withDropShadow(ctx, func) {
            ctx.save();
            ctx.shadowOffsetX = 3;
            ctx.shadowOffsetY = 3;
            ctx.shadowBlur = 5;
            ctx.shadowColor = '#888888';
            func(ctx);
            ctx.restore();
        }

        function draw() {

            var ctx = canvas.getContext('2d');

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#' + byId('txtBorder').value;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#' + byId('txtBg').value;
            ctx.fillRect(10, 10, canvas.width - 20, canvas.height - 20);

            if (byId('chkDropShadow').checked) {
                withDropShadow(ctx, drawArrow);
                withDropShadow(ctx, drawText);
            } else {
                drawArrow(ctx);
                drawText(ctx);
            }

            byId('img').src = canvas.toDataURL("image/png");
        }

        if (canvas.getContext && canvas.toDataURL) {
            var events = [{
                    id: "txt",
                    eventName: "keyup"
                },
                {
                    id: "txtFontPx",
                    eventName: "keyup"
                },
                {
                    id: "txtFontColor",
                    eventName: "change"
                },
                {
                    id: "txtBg",
                    eventName: "change"
                },
                {
                    id: "txtBorder",
                    eventName: "change"
                },
                {
                    id: "txtArrow",
                    eventName: "change"
                },
                {
                    id: "ddlFont",
                    eventName: "change"
                },
                {
                    id: "chkBold",
                    eventName: "change"
                },
                {
                    id: "chkDropShadow",
                    eventName: "change"
                },
            ];

            events.forEach(function (item) {
                byId(item.id).addEventListener(item.eventName, draw);
            });
            draw();
        } else {
            byId('divContent').style.display = "none";
            byId('divBroken').style.display = "block";
        }
    </script>
</body>
</html>